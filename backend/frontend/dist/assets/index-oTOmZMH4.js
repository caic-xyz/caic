(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const Rt=!1,Ft=(t,e)=>t===e,Dt=Symbol("solid-track"),at={equals:Ft};let Ct=Pt;const z=1,ut=2,At={owned:null,cleanups:null,context:null,owner:null};var L=null;let gt=null,Ut=null,E=null,B=null,Q=null,ht=0;function ot(t,e){const n=E,s=L,r=t.length===0,i=e===void 0?s:e,o=r?At:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=r?t:()=>t(()=>X(()=>rt(o)));L=o,E=null;try{return lt(l,!0)}finally{E=n,L=s}}function J(t,e){e=e?Object.assign({},at,e):at;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),Bt(n,r));return[It.bind(n),s]}function $(t,e,n){const s=yt(t,e,!1,z);it(s)}function Et(t,e,n){Ct=Ht;const s=yt(t,e,!1,z);s.user=!0,Q?Q.push(s):it(s)}function j(t,e,n){n=n?Object.assign({},at,n):at;const s=yt(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,it(s),It.bind(s)}function X(t){if(E===null)return t();const e=E;E=null;try{return t()}finally{E=e}}function qt(t){Et(()=>X(t))}function Lt(t){return L===null||(L.cleanups===null?L.cleanups=[t]:L.cleanups.push(t)),t}function jt(t){const e=j(t),n=j(()=>vt(e()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}function It(){if(this.sources&&this.state)if(this.state===z)it(this);else{const t=B;B=null,lt(()=>ft(this),!1),B=t}if(E){const t=this.observers?this.observers.length:0;E.sources?(E.sources.push(this),E.sourceSlots.push(t)):(E.sources=[this],E.sourceSlots=[t]),this.observers?(this.observers.push(E),this.observerSlots.push(E.sources.length-1)):(this.observers=[E],this.observerSlots=[E.sources.length-1])}return this.value}function Bt(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&lt(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],o=gt&&gt.running;o&&gt.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?B.push(i):Q.push(i),i.observers&&Nt(i)),o||(i.state=z)}if(B.length>1e6)throw B=[],new Error},!1)),e}function it(t){if(!t.fn)return;rt(t);const e=ht;Vt(t,t.value,e)}function Vt(t,e,n){let s;const r=L,i=E;E=L=t;try{s=t.fn(e)}catch(o){return t.pure&&(t.state=z,t.owned&&t.owned.forEach(rt),t.owned=null),t.updatedAt=n+1,Mt(o)}finally{E=i,L=r}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Bt(t,s):t.value=s,t.updatedAt=n)}function yt(t,e,n,s=z,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:L,context:L?L.context:null,pure:n};return L===null||L!==At&&(L.owned?L.owned.push(i):L.owned=[i]),i}function ct(t){if(t.state===0)return;if(t.state===ut)return ft(t);if(t.suspense&&X(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<ht);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===z)it(t);else if(t.state===ut){const s=B;B=null,lt(()=>ft(t,e[0]),!1),B=s}}function lt(t,e){if(B)return t();let n=!1;e||(B=[]),Q?n=!0:Q=[],ht++;try{const s=t();return Wt(n),s}catch(s){n||(Q=null),B=null,Mt(s)}}function Wt(t){if(B&&(Pt(B),B=null),t)return;const e=Q;Q=null,e.length&&lt(()=>Ct(e),!1)}function Pt(t){for(let e=0;e<t.length;e++)ct(t[e])}function Ht(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:ct(s)}for(e=0;e<n;e++)ct(t[e])}function ft(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===z?s!==e&&(!s.updatedAt||s.updatedAt<ht)&&ct(s):r===ut&&ft(s,e)}}}function Nt(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=ut,n.pure?B.push(n):Q.push(n),n.observers&&Nt(n))}}function rt(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();s<r.length&&(i.sourceSlots[o]=s,r[s]=i,n.observerSlots[s]=o)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)rt(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)rt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Jt(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Mt(t,e=L){throw Jt(t)}function vt(t){if(typeof t=="function"&&!t.length)return vt(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const s=vt(t[n]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}const Kt=Symbol("fallback");function $t(t){for(let e=0;e<t.length;e++)t[e]()}function Qt(t,e,n={}){let s=[],r=[],i=[],o=0,l=e.length>1?[]:null;return Lt(()=>$t(i)),()=>{let f=t()||[],h=f.length,_,u;return f[Dt],X(()=>{let I,O,D,x,y,b,k,C,P;if(h===0)o!==0&&($t(i),i=[],s=[],r=[],o=0,l&&(l=[])),n.fallback&&(s=[Kt],r[0]=ot(p=>(i[0]=p,n.fallback())),o=1);else if(o===0){for(r=new Array(h),u=0;u<h;u++)s[u]=f[u],r[u]=ot(M);o=h}else{for(D=new Array(h),x=new Array(h),l&&(y=new Array(h)),b=0,k=Math.min(o,h);b<k&&s[b]===f[b];b++);for(k=o-1,C=h-1;k>=b&&C>=b&&s[k]===f[C];k--,C--)D[C]=r[k],x[C]=i[k],l&&(y[C]=l[k]);for(I=new Map,O=new Array(C+1),u=C;u>=b;u--)P=f[u],_=I.get(P),O[u]=_===void 0?-1:_,I.set(P,u);for(_=b;_<=k;_++)P=s[_],u=I.get(P),u!==void 0&&u!==-1?(D[u]=r[_],x[u]=i[_],l&&(y[u]=l[_]),u=O[u],I.set(P,u)):i[_]();for(u=b;u<h;u++)u in D?(r[u]=D[u],i[u]=x[u],l&&(l[u]=y[u],l[u](u))):r[u]=ot(M);r=r.slice(0,o=h),s=f.slice(0)}return r});function M(I){if(i[u]=I,l){const[O,D]=J(u);return l[u]=D,e(f[u],O)}return e(f[u])}}}function w(t,e){return X(()=>t(e||{}))}const Ot=t=>`Stale read from <${t}>.`;function et(t){const e="fallback"in t&&{fallback:()=>t.fallback};return j(Qt(()=>t.each,t.children,e||void 0))}function G(t){const e=t.keyed,n=j(()=>t.when,void 0,void 0),s=e?n:j(n,void 0,{equals:(r,i)=>!r==!i});return j(()=>{const r=s();if(r){const i=t.children;return typeof i=="function"&&i.length>0?X(()=>i(e?r:()=>{if(!X(s))throw Ot("Show");return n()})):i}return t.fallback},void 0,void 0)}function Xt(t){const e=jt(()=>t.children),n=j(()=>{const s=e(),r=Array.isArray(s)?s:[s];let i=()=>{};for(let o=0;o<r.length;o++){const l=o,f=r[o],h=i,_=j(()=>h()?void 0:f.when,void 0,void 0),u=f.keyed?_:j(_,void 0,{equals:(M,I)=>!M==!I});i=()=>h()||(u()?[l,_,f]:void 0)}return i});return j(()=>{const s=n()();if(!s)return t.fallback;const[r,i,o]=s,l=o.children;return typeof l=="function"&&l.length>0?X(()=>l(o.keyed?i():()=>{var h;if(((h=X(n)())==null?void 0:h[0])!==r)throw Ot("Match");return i()})):l},void 0,void 0)}function st(t){return t}const Yt=t=>j(()=>t());function Zt(t,e,n){let s=n.length,r=e.length,i=s,o=0,l=0,f=e[r-1].nextSibling,h=null;for(;o<r||l<i;){if(e[o]===n[l]){o++,l++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===o){const _=i<s?l?n[l-1].nextSibling:n[i-l]:f;for(;l<i;)t.insertBefore(n[l++],_)}else if(i===l)for(;o<r;)(!h||!h.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[i-1]&&n[l]===e[r-1]){const _=e[--r].nextSibling;t.insertBefore(n[l++],e[o++].nextSibling),t.insertBefore(n[--i],_),e[r]=n[i]}else{if(!h){h=new Map;let u=l;for(;u<i;)h.set(n[u],u++)}const _=h.get(e[o]);if(_!=null)if(l<_&&_<i){let u=o,M=1,I;for(;++u<r&&u<i&&!((I=h.get(e[u]))==null||I!==_+M);)M++;if(M>_-l){const O=e[o];for(;l<_;)t.insertBefore(n[l++],O)}else t.replaceChild(n[l++],e[o++])}else o++;else e[o++].remove()}}}const kt="_$DX_DELEGATE";function zt(t,e,n,s={}){let r;return ot(i=>{r=i,e===document?t():g(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function T(t,e,n,s){let r;const i=()=>{const l=document.createElement("template");return l.innerHTML=t,l.content.firstChild},o=()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function Gt(t,e=window.document){const n=e[kt]||(e[kt]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,ee))}}function d(t,e){e==null?t.removeAttribute("class"):t.className=e}function te(t,e,n){n!=null?t.style.setProperty(e,n):t.style.removeProperty(e)}function g(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return dt(t,e,s,n);$(r=>dt(t,e(),r,n),s)}function ee(t){let e=t.target;const n=`$$${t.type}`,s=t.target,r=t.currentTarget,i=f=>Object.defineProperty(t,"target",{configurable:!0,value:f}),o=()=>{const f=e[n];if(f&&!e.disabled){const h=e[`${n}Data`];if(h!==void 0?f.call(e,h,t):f.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},l=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const f=t.composedPath();i(f[0]);for(let h=0;h<f.length-2&&(e=f[h],!!o());h++){if(e._$host){e=e._$host,l();break}if(e.parentNode===r)break}}else l();i(s)}function dt(t,e,n,s,r){for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,o=s!==void 0;if(t=o&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===n))return n;if(o){let l=n[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),n=tt(t,n,s,l)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean")n=tt(t,n,s);else{if(i==="function")return $(()=>{let l=e();for(;typeof l=="function";)l=l();n=dt(t,l,n,s)}),()=>n;if(Array.isArray(e)){const l=[],f=n&&Array.isArray(n);if(mt(l,e,n,r))return $(()=>n=dt(t,l,n,s,!0)),()=>n;if(l.length===0){if(n=tt(t,n,s),o)return n}else f?n.length===0?St(t,l,s):Zt(t,n,l):(n&&tt(t),St(t,l));n=l}else if(e.nodeType){if(Array.isArray(n)){if(o)return n=tt(t,n,s,e);tt(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function mt(t,e,n,s){let r=!1;for(let i=0,o=e.length;i<o;i++){let l=e[i],f=n&&n[t.length],h;if(!(l==null||l===!0||l===!1))if((h=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))r=mt(t,l,f)||r;else if(h==="function")if(s){for(;typeof l=="function";)l=l();r=mt(t,Array.isArray(l)?l:[l],Array.isArray(f)?f:[f])||r}else t.push(l),r=!0;else{const _=String(l);f&&f.nodeType===3&&f.data===_?t.push(f):t.push(document.createTextNode(_))}}return r}function St(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function tt(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(r!==l){const f=l.parentNode===t;!i&&!o?f?t.replaceChild(r,l):t.insertBefore(r,n):f&&l.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}class ne extends Error{constructor(e,n,s){super(n),this.status=e,this.code=n,this.details=s}}async function K(t,e,n){const s={method:t,headers:{"Content-Type":"application/json"}};n!==void 0&&(s.body=JSON.stringify(n));const r=await fetch(e,s);if(!r.ok){const i=await r.json();throw new ne(r.status,i.error.code,i.details)}return r.json()}function se(){return K("GET","/api/v1/repos")}function re(){return K("GET","/api/v1/tasks")}function ie(t){return K("POST","/api/v1/tasks",t)}function le(t){return new EventSource(`/api/v1/tasks/${t}/events`)}function oe(t,e){return K("POST",`/api/v1/tasks/${t}/input`,e)}function ae(t){return K("POST",`/api/v1/tasks/${t}/finish`)}function ue(t){return K("POST",`/api/v1/tasks/${t}/end`)}function ce(t){return K("POST",`/api/v1/tasks/${t}/pull`)}function fe(t){return K("POST",`/api/v1/tasks/${t}/push`)}function de(t){return K("POST",`/api/v1/tasks/${t}/reconnect`)}function he(t){return K("POST",`/api/v1/tasks/${t}/takeover`)}const ge="_container_1h18w_3",_e="_header_1h18w_9",be="_closeBtn_1h18w_20",ve="_query_1h18w_24",me="_messageArea_1h18w_32",ye="_placeholder_1h18w_43",pe="_inputForm_1h18w_47",we="_textInput_1h18w_53",$e="_btn_1h18w_58",ke="_btnGray_1h18w_66",Se="_btnGreen_1h18w_70",xe="_btnRed_1h18w_74",Te="_systemInit_1h18w_78",Ce="_systemMsg_1h18w_84",Ae="_assistantMsg_1h18w_90",Ee="_textBlock_1h18w_94",Le="_result_1h18w_99",Ie="_resultSuccess_1h18w_106",Be="_resultError_1h18w_110",Pe="_resultMeta_1h18w_114",Ne="_resultText_1h18w_120",Me="_toolResult_1h18w_125",Oe="_toolGroup_1h18w_135",Ge="_toolGroupInner_1h18w_148",Re="_toolBlock_1h18w_152",Fe="_toolBlockPre_1h18w_164",m={container:ge,header:_e,closeBtn:be,query:ve,messageArea:me,placeholder:ye,inputForm:pe,textInput:we,btn:$e,btnGray:ke,btnGreen:Se,btnRed:xe,systemInit:Te,systemMsg:Ce,assistantMsg:Ae,textBlock:Ee,result:Le,resultSuccess:Ie,resultError:Be,resultMeta:Pe,resultText:Ne,toolResult:Me,toolGroup:Oe,toolGroupInner:Ge,toolBlock:Re,toolBlockPre:Fe};var De=T("<p>Waiting for agent output..."),Ue=T("<button type=button>Finish"),qe=T("<button type=button>Reconnect"),je=T("<button type=button>Takeover"),Ve=T('<form><input type=text placeholder="Send message to agent..."><button type=submit>Send</button><button type=button>Pull</button><button type=button>Push</button><button type=button>End'),We=T("<div><div><h3>Task #</h3><button>Close</button></div><div></div><div>"),He=T("<div>Session started &middot; <!> &middot; "),Je=T("<div>[<!>]"),_t=T("<div>"),Ke=T("<div>$<!> &middot; <!>s &middot; <!> turns"),Qe=T("<div><strong>"),Xe=T("<details><summary>tool result"),Ye=T("<details><summary> tools: </summary><div>"),Ze=T("<details><summary></summary><pre>");function ze(t){const[e,n]=J([]),[s,r]=J(""),[i,o]=J(!1);Et(()=>{const x=t.taskId;n([]);const y=le(x);y.addEventListener("message",b=>{try{const k=JSON.parse(b.data);n(C=>[...C,k])}catch{}}),Lt(()=>y.close())});async function l(){const x=s().trim();if(x){o(!0);try{await oe(t.taskId,{prompt:x}),r("")}finally{o(!1)}}}const f=()=>{const x=t.taskState;return x==="running"||x==="starting"||x==="waiting"},h=()=>t.taskState==="waiting";async function _(){await ae(t.taskId)}async function u(){await ce(t.taskId)}async function M(){await fe(t.taskId)}async function I(){await ue(t.taskId)}async function O(){await de(t.taskId)}async function D(){await he(t.taskId)}return(()=>{var x=We(),y=x.firstChild,b=y.firstChild;b.firstChild;var k=b.nextSibling,C=y.nextSibling,P=C.nextSibling;return g(b,()=>t.taskId,null),k.$$click=()=>t.onClose(),g(C,()=>t.taskQuery),g(P,w(et,{get each(){return e()},children:p=>w(tn,{msg:p})}),null),g(P,w(G,{get when(){return e().length===0},get children(){var p=De();return $(()=>d(p,m.placeholder)),p}}),null),g(x,w(G,{get when(){return f()},get children(){var p=Ve(),N=p.firstChild,Y=N.nextSibling,V=Y.nextSibling,U=V.nextSibling,a=U.nextSibling;return p.addEventListener("submit",c=>{c.preventDefault(),l()}),N.$$input=c=>r(c.currentTarget.value),V.$$click=()=>u(),U.$$click=()=>M(),g(p,w(G,{get when(){return h()},get children(){return[(()=>{var c=Ue();return c.$$click=()=>_(),$(()=>d(c,`${m.btn} ${m.btnGreen}`)),c})(),(()=>{var c=qe();return c.$$click=()=>O(),$(()=>d(c,`${m.btn} ${m.btnGray}`)),c})(),(()=>{var c=je();return c.$$click=()=>D(),$(()=>d(c,`${m.btn} ${m.btnGray}`)),c})()]}}),a),a.$$click=()=>I(),$(c=>{var A=m.inputForm,R=i(),F=m.textInput,v=i()||!s().trim(),W=`${m.btn} ${m.btnGray}`,q=`${m.btn} ${m.btnGray}`,H=`${m.btn} ${m.btnRed}`;return A!==c.e&&d(p,c.e=A),R!==c.t&&(N.disabled=c.t=R),F!==c.a&&d(N,c.a=F),v!==c.o&&(Y.disabled=c.o=v),W!==c.i&&d(V,c.i=W),q!==c.n&&d(U,c.n=q),H!==c.s&&d(a,c.s=H),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),$(()=>N.value=s()),p}}),null),$(p=>{var N=m.container,Y=m.header,V=m.closeBtn,U=m.query,a=m.messageArea;return N!==p.e&&d(x,p.e=N),Y!==p.t&&d(y,p.t=Y),V!==p.a&&d(k,p.a=V),U!==p.o&&d(C,p.o=U),a!==p.i&&d(P,p.i=a),p},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),x})()}function tn(t){return w(Xt,{get children(){return[w(st,{get when(){return Yt(()=>t.msg.type==="system")()&&t.msg.subtype==="init"},get children(){var e=He(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,g(e,()=>t.msg.model,s),g(e,()=>t.msg.claude_code_version,null),$(()=>d(e,m.systemInit)),e}}),w(st,{get when(){return t.msg.type==="system"},get children(){var e=Je(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,g(e,()=>t.msg.subtype,s),$(()=>d(e,m.systemMsg)),e}}),w(st,{get when(){return t.msg.type==="assistant"},get children(){var e=_t();return g(e,w(et,{get each(){var n;return en(((n=t.msg.message)==null?void 0:n.content)??[])},children:n=>w(G,{get when(){return n.type==="text"},get fallback(){return w(sn,{get tools(){return n.blocks}})},get children(){return w(et,{get each(){return n.blocks},children:s=>(()=>{var r=_t();return g(r,()=>s.text),$(()=>d(r,m.textBlock)),r})()})}})})),$(()=>d(e,m.assistantMsg)),e}}),w(st,{get when(){return t.msg.type==="result"},get children(){var e=Qe(),n=e.firstChild;return g(n,()=>t.msg.is_error?"Error":"Done"),g(e,w(G,{get when(){return t.msg.result},get children(){var s=_t();return g(s,()=>t.msg.result),$(()=>d(s,m.resultText)),s}}),null),g(e,w(G,{get when(){return t.msg.total_cost_usd},get children(){var s=Ke(),r=s.firstChild,i=r.nextSibling,o=i.nextSibling,l=o.nextSibling,f=l.nextSibling,h=f.nextSibling;return h.nextSibling,g(s,()=>{var _;return(_=t.msg.total_cost_usd)==null?void 0:_.toFixed(4)},i),g(s,()=>((t.msg.duration_ms??0)/1e3).toFixed(1),l),g(s,()=>t.msg.num_turns,h),$(()=>d(s,m.resultMeta)),s}}),null),$(()=>d(e,`${m.result} ${t.msg.is_error?m.resultError:m.resultSuccess}`)),e}}),w(st,{get when(){return t.msg.type==="user"},get children(){var e=Xe();return $(()=>d(e,m.toolResult)),e}})]}})}function en(t){const e=[];for(const n of t){const s=n.type==="text"?"text":"tool_use",r=e[e.length-1];r&&r.type===s?r.blocks.push(n):e.push({type:s,blocks:[n]})}return e}function nn(t){const e=new Map;for(const n of t){const s=n.name??"tool";e.set(s,(e.get(s)??0)+1)}return Array.from(e.entries()).map(([n,s])=>s>1?`${n} Ã—${s}`:n).join(", ")}function sn(t){return w(G,{get when(){return t.tools.length>1},get fallback(){return w(xt,{get name(){return t.tools[0].name??"tool"},get input(){return t.tools[0].input}})},get children(){var e=Ye(),n=e.firstChild,s=n.firstChild,r=n.nextSibling;return g(n,()=>t.tools.length,s),g(n,()=>nn(t.tools),null),g(r,w(et,{get each(){return t.tools},children:i=>w(xt,{get name(){return i.name??"tool"},get input(){return i.input}})})),$(i=>{var o=m.toolGroup,l=m.toolGroupInner;return o!==i.e&&d(e,i.e=o),l!==i.t&&d(r,i.t=l),i},{e:void 0,t:void 0}),e}})}function xt(t){return(()=>{var e=Ze(),n=e.firstChild,s=n.nextSibling;return g(n,()=>t.name),g(s,()=>JSON.stringify(t.input,null,2)),$(r=>{var i=m.toolBlock,o=m.toolBlockPre;return i!==r.e&&d(e,r.e=i),o!==r.t&&d(s,r.t=o),r},{e:void 0,t:void 0}),e})()}Gt(["click","input"]);function rn(){"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()}function ln(){return"Notification"in window&&Notification.permission==="granted"}function on(t,e){if(!ln()||document.visibilityState==="visible")return;const n=new Notification("Agent waiting for input",{body:`Task #${t}: ${e}`,tag:`wmao-waiting-${t}`});n.onclick=()=>{window.focus(),n.close()}}const an="_app_17sc8_3",un="_titleRow_17sc8_10",cn="_title_17sc8_10",fn="_subtitle_17sc8_23",dn="_submitForm_17sc8_28",hn="_repoSelect_17sc8_35",gn="_promptInput_17sc8_39",_n="_layout_17sc8_44",bn="_taskList_17sc8_49",vn="_taskListCollapsed_17sc8_53",mn="_placeholder_17sc8_57",yn="_taskCard_17sc8_61",pn="_taskCardSelected_17sc8_69",wn="_taskHeader_17sc8_73",$n="_taskTitle_17sc8_78",kn="_stateBadge_17sc8_82",Sn="_repoLabel_17sc8_88",xn="_branchLabel_17sc8_93",Tn="_costLabel_17sc8_98",Cn="_errorLabel_17sc8_103",An="_detailPane_17sc8_108",En="_backBtn_17sc8_113",S={app:an,titleRow:un,title:cn,subtitle:fn,submitForm:dn,repoSelect:hn,promptInput:gn,layout:_n,taskList:bn,taskListCollapsed:vn,placeholder:mn,taskCard:yn,taskCardSelected:pn,taskHeader:wn,taskTitle:$n,stateBadge:kn,repoLabel:Sn,branchLabel:xn,costLabel:Tn,errorLabel:Cn,detailPane:An,backBtn:En};var Ln=T("<p>No tasks yet."),In=T("<div><button>&larr; Back"),Bn=T('<div><div><h1>wmao</h1><span>Work my ass off. Manage coding agents.</span></div><form><select></select><input type=text placeholder="Describe a task..."><button type=submit></button></form><div><div><h2>Tasks'),Pn=T("<option>"),bt=T("<div>"),Nn=T("<span>$<!> &middot; <!>s"),Mn=T("<div><div><strong></strong><span>");function On(){const[t,e]=J(""),[n,s]=J([]),[r,i]=J(!1),[o,l]=J(null),[f,h]=J([]),[_,u]=J("");let M=new Map;qt(async()=>{rn();const y=await se();h(y),y.length>0&&u(y[0].path)});async function I(){const y=t().trim(),b=_();if(!(!y||!b)){i(!0);try{const k=await ie({prompt:y,repo:b});e(""),await O(),l(k.id)}finally{i(!1)}}}async function O(){const y=await re();for(const b of y)b.state==="waiting"&&M.get(b.id)!=="waiting"&&on(b.id,b.task);M=new Map(y.map(b=>[b.id,b.state])),s(y)}setInterval(O,5e3),O();const D=()=>[...n()].sort((y,b)=>{const k=y.task.startsWith("(adopted)")?1:0,C=b.task.startsWith("(adopted)")?1:0;return k!==C?k-C:b.id-y.id}),x=()=>{const y=o();return y===null?null:n().find(b=>b.id===y)??null};return(()=>{var y=Bn(),b=y.firstChild,k=b.firstChild,C=k.nextSibling,P=b.nextSibling,p=P.firstChild,N=p.nextSibling,Y=N.nextSibling,V=P.nextSibling,U=V.firstChild;return U.firstChild,P.addEventListener("submit",a=>{a.preventDefault(),I()}),p.addEventListener("change",a=>u(a.currentTarget.value)),g(p,w(et,{get each(){return f()},children:a=>(()=>{var c=Pn();return g(c,()=>a.path),$(()=>c.value=a.path),c})()})),N.$$input=a=>e(a.currentTarget.value),g(Y,()=>r()?"Submitting...":"Run"),g(U,w(G,{get when(){return n().length===0},get children(){var a=Ln();return $(()=>d(a,S.placeholder)),a}}),null),g(U,w(et,{get each(){return D()},children:a=>(()=>{var c=Mn(),A=c.firstChild,R=A.firstChild,F=R.nextSibling;return c.$$click=()=>l(a.id),g(R,()=>a.task),g(F,()=>a.state),g(c,w(G,{get when(){return a.repo},get children(){var v=bt();return g(v,()=>a.repo),$(()=>d(v,S.repoLabel)),v}}),null),g(c,w(G,{get when(){return a.branch},get children(){var v=bt();return g(v,()=>a.branch),$(()=>d(v,S.branchLabel)),v}}),null),g(c,w(G,{get when(){return a.costUSD>0},get children(){var v=Nn(),W=v.firstChild,q=W.nextSibling,H=q.nextSibling,Z=H.nextSibling;return Z.nextSibling,g(v,()=>a.costUSD.toFixed(4),q),g(v,()=>(a.durationMs/1e3).toFixed(1),Z),$(()=>d(v,S.costLabel)),v}}),null),g(c,w(G,{get when(){return a.error},get children(){var v=bt();return g(v,()=>a.error),$(()=>d(v,S.errorLabel)),v}}),null),$(v=>{var W=`${S.taskCard} ${o()===a.id?S.taskCardSelected:""}`,q=S.taskHeader,H=S.taskTitle,Z=S.stateBadge,nt=Gn(a.state);return W!==v.e&&d(c,v.e=W),q!==v.t&&d(A,v.t=q),H!==v.a&&d(R,v.a=H),Z!==v.o&&d(F,v.o=Z),nt!==v.i&&te(F,"background",v.i=nt),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),c})()}),null),g(V,w(G,{get when(){return o()!==null},get children(){var a=In(),c=a.firstChild;return c.$$click=()=>l(null),g(a,w(ze,{get taskId(){return o()??0},get taskState(){var A;return((A=x())==null?void 0:A.state)??"pending"},get taskQuery(){var A;return((A=x())==null?void 0:A.task)??""},onClose:()=>l(null)}),null),$(A=>{var R=S.detailPane,F=S.backBtn;return R!==A.e&&d(a,A.e=R),F!==A.t&&d(c,A.t=F),A},{e:void 0,t:void 0}),a}}),null),$(a=>{var c=S.app,A=S.titleRow,R=S.title,F=S.subtitle,v=S.submitForm,W=r(),q=S.repoSelect,H=r(),Z=S.promptInput,nt=r()||!t().trim()||!_(),pt=S.layout,wt=`${S.taskList} ${o()!==null?S.taskListCollapsed:""}`;return c!==a.e&&d(y,a.e=c),A!==a.t&&d(b,a.t=A),R!==a.a&&d(k,a.a=R),F!==a.o&&d(C,a.o=F),v!==a.i&&d(P,a.i=v),W!==a.n&&(p.disabled=a.n=W),q!==a.s&&d(p,a.s=q),H!==a.h&&(N.disabled=a.h=H),Z!==a.r&&d(N,a.r=Z),nt!==a.d&&(Y.disabled=a.d=nt),pt!==a.l&&d(V,a.l=pt),wt!==a.u&&d(U,a.u=wt),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),$(()=>p.value=_()),$(()=>N.value=t()),y})()}function Gn(t){switch(t){case"done":return"#d4edda";case"failed":return"#f8d7da";case"ended":return"#e2e3e5";default:return"#fff3cd"}}Gt(["input","click"]);const Tt=document.getElementById("app");Tt&&zt(()=>w(On,{}),Tt);
