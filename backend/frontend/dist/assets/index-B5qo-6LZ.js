(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const Mt=!1,Ot=(t,e)=>t===e,Gt=Symbol("solid-track"),lt={equals:Ot};let St=Lt;const Z=1,ot=2,xt={owned:null,cleanups:null,context:null,owner:null};var E=null;let dt=null,Ft=null,C=null,P=null,K=null,ft=0;function it(t,e){const n=C,s=E,r=t.length===0,i=e===void 0?s:e,o=r?xt:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=r?t:()=>t(()=>Q(()=>nt(o)));E=o,C=null;try{return rt(l,!0)}finally{C=n,E=s}}function H(t,e){e=e?Object.assign({},lt,e):lt;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),Et(n,r));return[At.bind(n),s]}function k(t,e,n){const s=vt(t,e,!1,Z);st(s)}function Tt(t,e,n){St=Vt;const s=vt(t,e,!1,Z);s.user=!0,K?K.push(s):st(s)}function j(t,e,n){n=n?Object.assign({},lt,n):lt;const s=vt(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,st(s),At.bind(s)}function Q(t){if(C===null)return t();const e=C;C=null;try{return t()}finally{C=e}}function Rt(t){Tt(()=>Q(t))}function Ct(t){return E===null||(E.cleanups===null?E.cleanups=[t]:E.cleanups.push(t)),t}function Dt(t){const e=j(t),n=j(()=>_t(e()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}function At(){if(this.sources&&this.state)if(this.state===Z)st(this);else{const t=P;P=null,rt(()=>at(this),!1),P=t}if(C){const t=this.observers?this.observers.length:0;C.sources?(C.sources.push(this),C.sourceSlots.push(t)):(C.sources=[this],C.sourceSlots=[t]),this.observers?(this.observers.push(C),this.observerSlots.push(C.sources.length-1)):(this.observers=[C],this.observerSlots=[C.sources.length-1])}return this.value}function Et(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&rt(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],o=dt&&dt.running;o&&dt.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?P.push(i):K.push(i),i.observers&&It(i)),o||(i.state=Z)}if(P.length>1e6)throw P=[],new Error},!1)),e}function st(t){if(!t.fn)return;nt(t);const e=ft;Ut(t,t.value,e)}function Ut(t,e,n){let s;const r=E,i=C;C=E=t;try{s=t.fn(e)}catch(o){return t.pure&&(t.state=Z,t.owned&&t.owned.forEach(nt),t.owned=null),t.updatedAt=n+1,Bt(o)}finally{C=i,E=r}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Et(t,s):t.value=s,t.updatedAt=n)}function vt(t,e,n,s=Z,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:E,context:E?E.context:null,pure:n};return E===null||E!==xt&&(E.owned?E.owned.push(i):E.owned=[i]),i}function ut(t){if(t.state===0)return;if(t.state===ot)return at(t);if(t.suspense&&Q(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<ft);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===Z)st(t);else if(t.state===ot){const s=P;P=null,rt(()=>at(t,e[0]),!1),P=s}}function rt(t,e){if(P)return t();let n=!1;e||(P=[]),K?n=!0:K=[],ft++;try{const s=t();return jt(n),s}catch(s){n||(K=null),P=null,Bt(s)}}function jt(t){if(P&&(Lt(P),P=null),t)return;const e=K;K=null,e.length&&rt(()=>St(e),!1)}function Lt(t){for(let e=0;e<t.length;e++)ut(t[e])}function Vt(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:ut(s)}for(e=0;e<n;e++)ut(t[e])}function at(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===Z?s!==e&&(!s.updatedAt||s.updatedAt<ft)&&ut(s):r===ot&&at(s,e)}}}function It(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=ot,n.pure?P.push(n):K.push(n),n.observers&&It(n))}}function nt(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();s<r.length&&(i.sourceSlots[o]=s,r[s]=i,n.observerSlots[s]=o)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)nt(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)nt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function qt(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Bt(t,e=E){throw qt(t)}function _t(t){if(typeof t=="function"&&!t.length)return _t(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const s=_t(t[n]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}const Wt=Symbol("fallback");function pt(t){for(let e=0;e<t.length;e++)t[e]()}function Ht(t,e,n={}){let s=[],r=[],i=[],o=0,l=e.length>1?[]:null;return Ct(()=>pt(i)),()=>{let f=t()||[],d=f.length,_,a;return f[Gt],Q(()=>{let I,M,R,T,y,v,S,w,b;if(d===0)o!==0&&(pt(i),i=[],s=[],r=[],o=0,l&&(l=[])),n.fallback&&(s=[Wt],r[0]=it(B=>(i[0]=B,n.fallback())),o=1);else if(o===0){for(r=new Array(d),a=0;a<d;a++)s[a]=f[a],r[a]=it(N);o=d}else{for(R=new Array(d),T=new Array(d),l&&(y=new Array(d)),v=0,S=Math.min(o,d);v<S&&s[v]===f[v];v++);for(S=o-1,w=d-1;S>=v&&w>=v&&s[S]===f[w];S--,w--)R[w]=r[S],T[w]=i[S],l&&(y[w]=l[S]);for(I=new Map,M=new Array(w+1),a=w;a>=v;a--)b=f[a],_=I.get(b),M[a]=_===void 0?-1:_,I.set(b,a);for(_=v;_<=S;_++)b=s[_],a=I.get(b),a!==void 0&&a!==-1?(R[a]=r[_],T[a]=i[_],l&&(y[a]=l[_]),a=M[a],I.set(b,a)):i[_]();for(a=v;a<d;a++)a in R?(r[a]=R[a],i[a]=T[a],l&&(l[a]=y[a],l[a](a))):r[a]=it(N);r=r.slice(0,o=d),s=f.slice(0)}return r});function N(I){if(i[a]=I,l){const[M,R]=H(a);return l[a]=R,e(f[a],M)}return e(f[a])}}}function $(t,e){return Q(()=>t(e||{}))}const Pt=t=>`Stale read from <${t}>.`;function tt(t){const e="fallback"in t&&{fallback:()=>t.fallback};return j(Ht(()=>t.each,t.children,e||void 0))}function O(t){const e=t.keyed,n=j(()=>t.when,void 0,void 0),s=e?n:j(n,void 0,{equals:(r,i)=>!r==!i});return j(()=>{const r=s();if(r){const i=t.children;return typeof i=="function"&&i.length>0?Q(()=>i(e?r:()=>{if(!Q(s))throw Pt("Show");return n()})):i}return t.fallback},void 0,void 0)}function Jt(t){const e=Dt(()=>t.children),n=j(()=>{const s=e(),r=Array.isArray(s)?s:[s];let i=()=>{};for(let o=0;o<r.length;o++){const l=o,f=r[o],d=i,_=j(()=>d()?void 0:f.when,void 0,void 0),a=f.keyed?_:j(_,void 0,{equals:(N,I)=>!N==!I});i=()=>d()||(a()?[l,_,f]:void 0)}return i});return j(()=>{const s=n()();if(!s)return t.fallback;const[r,i,o]=s,l=o.children;return typeof l=="function"&&l.length>0?Q(()=>l(o.keyed?i():()=>{var d;if(((d=Q(n)())==null?void 0:d[0])!==r)throw Pt("Match");return i()})):l},void 0,void 0)}function et(t){return t}const Kt=t=>j(()=>t());function Qt(t,e,n){let s=n.length,r=e.length,i=s,o=0,l=0,f=e[r-1].nextSibling,d=null;for(;o<r||l<i;){if(e[o]===n[l]){o++,l++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===o){const _=i<s?l?n[l-1].nextSibling:n[i-l]:f;for(;l<i;)t.insertBefore(n[l++],_)}else if(i===l)for(;o<r;)(!d||!d.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[i-1]&&n[l]===e[r-1]){const _=e[--r].nextSibling;t.insertBefore(n[l++],e[o++].nextSibling),t.insertBefore(n[--i],_),e[r]=n[i]}else{if(!d){d=new Map;let a=l;for(;a<i;)d.set(n[a],a++)}const _=d.get(e[o]);if(_!=null)if(l<_&&_<i){let a=o,N=1,I;for(;++a<r&&a<i&&!((I=d.get(e[a]))==null||I!==_+N);)N++;if(N>_-l){const M=e[o];for(;l<_;)t.insertBefore(n[l++],M)}else t.replaceChild(n[l++],e[o++])}else o++;else e[o++].remove()}}}const yt="_$DX_DELEGATE";function Xt(t,e,n,s={}){let r;return it(i=>{r=i,e===document?t():g(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function x(t,e,n,s){let r;const i=()=>{const l=document.createElement("template");return l.innerHTML=t,l.content.firstChild},o=()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function Nt(t,e=window.document){const n=e[yt]||(e[yt]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,Zt))}}function h(t,e){e==null?t.removeAttribute("class"):t.className=e}function Yt(t,e,n){n!=null?t.style.setProperty(e,n):t.style.removeProperty(e)}function g(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return ct(t,e,s,n);k(r=>ct(t,e(),r,n),s)}function Zt(t){let e=t.target;const n=`$$${t.type}`,s=t.target,r=t.currentTarget,i=f=>Object.defineProperty(t,"target",{configurable:!0,value:f}),o=()=>{const f=e[n];if(f&&!e.disabled){const d=e[`${n}Data`];if(d!==void 0?f.call(e,d,t):f.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},l=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const f=t.composedPath();i(f[0]);for(let d=0;d<f.length-2&&(e=f[d],!!o());d++){if(e._$host){e=e._$host,l();break}if(e.parentNode===r)break}}else l();i(s)}function ct(t,e,n,s,r){for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,o=s!==void 0;if(t=o&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===n))return n;if(o){let l=n[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),n=z(t,n,s,l)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean")n=z(t,n,s);else{if(i==="function")return k(()=>{let l=e();for(;typeof l=="function";)l=l();n=ct(t,l,n,s)}),()=>n;if(Array.isArray(e)){const l=[],f=n&&Array.isArray(n);if(mt(l,e,n,r))return k(()=>n=ct(t,l,n,s,!0)),()=>n;if(l.length===0){if(n=z(t,n,s),o)return n}else f?n.length===0?$t(t,l,s):Qt(t,n,l):(n&&z(t),$t(t,l));n=l}else if(e.nodeType){if(Array.isArray(n)){if(o)return n=z(t,n,s,e);z(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function mt(t,e,n,s){let r=!1;for(let i=0,o=e.length;i<o;i++){let l=e[i],f=n&&n[t.length],d;if(!(l==null||l===!0||l===!1))if((d=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))r=mt(t,l,f)||r;else if(d==="function")if(s){for(;typeof l=="function";)l=l();r=mt(t,Array.isArray(l)?l:[l],Array.isArray(f)?f:[f])||r}else t.push(l),r=!0;else{const _=String(l);f&&f.nodeType===3&&f.data===_?t.push(f):t.push(document.createTextNode(_))}}return r}function $t(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function z(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(r!==l){const f=l.parentNode===t;!i&&!o?f?t.replaceChild(r,l):t.insertBefore(r,n):f&&l.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}class zt extends Error{constructor(e,n,s){super(n),this.status=e,this.code=n,this.details=s}}async function J(t,e,n){const s={method:t,headers:{"Content-Type":"application/json"}};n!==void 0&&(s.body=JSON.stringify(n));const r=await fetch(e,s);if(!r.ok){const i=await r.json();throw new zt(r.status,i.error.code,i.details)}return r.json()}function te(){return J("GET","/api/v1/repos")}function ee(){return J("GET","/api/v1/tasks")}function ne(t){return J("POST","/api/v1/tasks",t)}function se(t){return new EventSource(`/api/v1/tasks/${t}/events`)}function re(t,e){return J("POST",`/api/v1/tasks/${t}/input`,e)}function ie(t){return J("POST",`/api/v1/tasks/${t}/finish`)}function le(t){return J("POST",`/api/v1/tasks/${t}/end`)}function oe(t){return J("POST",`/api/v1/tasks/${t}/pull`)}function ue(t){return J("POST",`/api/v1/tasks/${t}/push`)}function ae(t){return J("POST",`/api/v1/tasks/${t}/reconnect`)}function ce(t){return J("POST",`/api/v1/tasks/${t}/takeover`)}const fe="_container_1lvm8_3",de="_header_1lvm8_9",he="_closeBtn_1lvm8_20",ge="_messageArea_1lvm8_24",_e="_placeholder_1lvm8_35",me="_inputForm_1lvm8_39",ve="_textInput_1lvm8_45",be="_btn_1lvm8_50",pe="_btnGray_1lvm8_58",ye="_btnGreen_1lvm8_62",$e="_btnRed_1lvm8_66",ke="_systemInit_1lvm8_70",we="_systemMsg_1lvm8_76",Se="_assistantMsg_1lvm8_82",xe="_textBlock_1lvm8_86",Te="_result_1lvm8_91",Ce="_resultSuccess_1lvm8_98",Ae="_resultError_1lvm8_102",Ee="_resultMeta_1lvm8_106",Le="_resultText_1lvm8_112",Ie="_toolResult_1lvm8_117",Be="_toolGroup_1lvm8_127",Pe="_toolGroupInner_1lvm8_140",Ne="_toolBlock_1lvm8_144",Me="_toolBlockPre_1lvm8_156",p={container:fe,header:de,closeBtn:he,messageArea:ge,placeholder:_e,inputForm:me,textInput:ve,btn:be,btnGray:pe,btnGreen:ye,btnRed:$e,systemInit:ke,systemMsg:we,assistantMsg:Se,textBlock:xe,result:Te,resultSuccess:Ce,resultError:Ae,resultMeta:Ee,resultText:Le,toolResult:Ie,toolGroup:Be,toolGroupInner:Pe,toolBlock:Ne,toolBlockPre:Me};var Oe=x("<p>Waiting for agent output..."),Ge=x("<button type=button>Finish"),Fe=x("<button type=button>Reconnect"),Re=x("<button type=button>Takeover"),De=x('<form><input type=text placeholder="Send message to agent..."><button type=submit>Send</button><button type=button>Pull</button><button type=button>Push</button><button type=button>End'),Ue=x("<div><div><h3>Task #</h3><button>Close</button></div><div>"),je=x("<div>Session started &middot; <!> &middot; "),Ve=x("<div>[<!>]"),ht=x("<div>"),qe=x("<div>$<!> &middot; <!>s &middot; <!> turns"),We=x("<div><strong>"),He=x("<details><summary>tool result"),Je=x("<details><summary> tool calls: </summary><div>"),Ke=x("<details><summary></summary><pre>");function Qe(t){const[e,n]=H([]),[s,r]=H(""),[i,o]=H(!1);Tt(()=>{const T=t.taskId;n([]);const y=se(T);y.addEventListener("message",v=>{try{const S=JSON.parse(v.data);n(w=>[...w,S])}catch{}}),Ct(()=>y.close())});async function l(){const T=s().trim();if(T){o(!0);try{await re(t.taskId,{prompt:T}),r("")}finally{o(!1)}}}const f=()=>{const T=t.taskState;return T==="running"||T==="starting"||T==="waiting"},d=()=>t.taskState==="waiting";async function _(){await ie(t.taskId)}async function a(){await oe(t.taskId)}async function N(){await ue(t.taskId)}async function I(){await le(t.taskId)}async function M(){await ae(t.taskId)}async function R(){await ce(t.taskId)}return(()=>{var T=Ue(),y=T.firstChild,v=y.firstChild;v.firstChild;var S=v.nextSibling,w=y.nextSibling;return g(v,()=>t.taskId,null),S.$$click=()=>t.onClose(),g(w,$(tt,{get each(){return e()},children:b=>$(Xe,{msg:b})}),null),g(w,$(O,{get when(){return e().length===0},get children(){var b=Oe();return k(()=>h(b,p.placeholder)),b}}),null),g(T,$(O,{get when(){return f()},get children(){var b=De(),B=b.firstChild,X=B.nextSibling,V=X.nextSibling,D=V.nextSibling,u=D.nextSibling;return b.addEventListener("submit",c=>{c.preventDefault(),l()}),B.$$input=c=>r(c.currentTarget.value),V.$$click=()=>a(),D.$$click=()=>N(),g(b,$(O,{get when(){return d()},get children(){return[(()=>{var c=Ge();return c.$$click=()=>_(),k(()=>h(c,`${p.btn} ${p.btnGreen}`)),c})(),(()=>{var c=Fe();return c.$$click=()=>M(),k(()=>h(c,`${p.btn} ${p.btnGray}`)),c})(),(()=>{var c=Re();return c.$$click=()=>R(),k(()=>h(c,`${p.btn} ${p.btnGray}`)),c})()]}}),u),u.$$click=()=>I(),k(c=>{var L=p.inputForm,G=i(),F=p.textInput,m=i()||!s().trim(),q=`${p.btn} ${p.btnGray}`,U=`${p.btn} ${p.btnGray}`,W=`${p.btn} ${p.btnRed}`;return L!==c.e&&h(b,c.e=L),G!==c.t&&(B.disabled=c.t=G),F!==c.a&&h(B,c.a=F),m!==c.o&&(X.disabled=c.o=m),q!==c.i&&h(V,c.i=q),U!==c.n&&h(D,c.n=U),W!==c.s&&h(u,c.s=W),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),k(()=>B.value=s()),b}}),null),k(b=>{var B=p.container,X=p.header,V=p.closeBtn,D=p.messageArea;return B!==b.e&&h(T,b.e=B),X!==b.t&&h(y,b.t=X),V!==b.a&&h(S,b.a=V),D!==b.o&&h(w,b.o=D),b},{e:void 0,t:void 0,a:void 0,o:void 0}),T})()}function Xe(t){return $(Jt,{get children(){return[$(et,{get when(){return Kt(()=>t.msg.type==="system")()&&t.msg.subtype==="init"},get children(){var e=je(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,g(e,()=>t.msg.model,s),g(e,()=>t.msg.claude_code_version,null),k(()=>h(e,p.systemInit)),e}}),$(et,{get when(){return t.msg.type==="system"},get children(){var e=Ve(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,g(e,()=>t.msg.subtype,s),k(()=>h(e,p.systemMsg)),e}}),$(et,{get when(){return t.msg.type==="assistant"},get children(){var e=ht();return g(e,$(tt,{get each(){var n;return Ye(((n=t.msg.message)==null?void 0:n.content)??[])},children:n=>$(O,{get when(){return n.type==="text"},get fallback(){return $(Ze,{get tools(){return n.blocks}})},get children(){return $(tt,{get each(){return n.blocks},children:s=>(()=>{var r=ht();return g(r,()=>s.text),k(()=>h(r,p.textBlock)),r})()})}})})),k(()=>h(e,p.assistantMsg)),e}}),$(et,{get when(){return t.msg.type==="result"},get children(){var e=We(),n=e.firstChild;return g(n,()=>t.msg.is_error?"Error":"Done"),g(e,$(O,{get when(){return t.msg.result},get children(){var s=ht();return g(s,()=>t.msg.result),k(()=>h(s,p.resultText)),s}}),null),g(e,$(O,{get when(){return t.msg.total_cost_usd},get children(){var s=qe(),r=s.firstChild,i=r.nextSibling,o=i.nextSibling,l=o.nextSibling,f=l.nextSibling,d=f.nextSibling;return d.nextSibling,g(s,()=>{var _;return(_=t.msg.total_cost_usd)==null?void 0:_.toFixed(4)},i),g(s,()=>((t.msg.duration_ms??0)/1e3).toFixed(1),l),g(s,()=>t.msg.num_turns,d),k(()=>h(s,p.resultMeta)),s}}),null),k(()=>h(e,`${p.result} ${t.msg.is_error?p.resultError:p.resultSuccess}`)),e}}),$(et,{get when(){return t.msg.type==="user"},get children(){var e=He();return k(()=>h(e,p.toolResult)),e}})]}})}function Ye(t){const e=[];for(const n of t){const s=n.type==="text"?"text":"tool_use",r=e[e.length-1];r&&r.type===s?r.blocks.push(n):e.push({type:s,blocks:[n]})}return e}function Ze(t){const e=()=>t.tools.map(s=>s.name??"tool"),n=()=>t.tools.length;return $(O,{get when(){return n()>1},get fallback(){return $(kt,{get name(){return t.tools[0].name??"tool"},get input(){return t.tools[0].input}})},get children(){var s=Je(),r=s.firstChild,i=r.firstChild,o=r.nextSibling;return g(r,n,i),g(r,()=>e().join(", "),null),g(o,$(tt,{get each(){return t.tools},children:l=>$(kt,{get name(){return l.name??"tool"},get input(){return l.input}})})),k(l=>{var f=p.toolGroup,d=p.toolGroupInner;return f!==l.e&&h(s,l.e=f),d!==l.t&&h(o,l.t=d),l},{e:void 0,t:void 0}),s}})}function kt(t){return(()=>{var e=Ke(),n=e.firstChild,s=n.nextSibling;return g(n,()=>t.name),g(s,()=>JSON.stringify(t.input,null,2)),k(r=>{var i=p.toolBlock,o=p.toolBlockPre;return i!==r.e&&h(e,r.e=i),o!==r.t&&h(s,r.t=o),r},{e:void 0,t:void 0}),e})()}Nt(["click","input"]);function ze(){"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()}function tn(){return"Notification"in window&&Notification.permission==="granted"}function en(t,e){if(!tn()||document.visibilityState==="visible")return;const n=new Notification("Agent waiting for input",{body:`Task #${t}: ${e}`,tag:`wmao-waiting-${t}`});n.onclick=()=>{window.focus(),n.close()}}const nn="_app_19oui_3",sn="_submitForm_19oui_10",rn="_repoSelect_19oui_17",ln="_promptInput_19oui_21",on="_layout_19oui_26",un="_taskList_19oui_31",an="_taskListCollapsed_19oui_35",cn="_placeholder_19oui_39",fn="_taskCard_19oui_43",dn="_taskCardSelected_19oui_51",hn="_taskHeader_19oui_55",gn="_taskTitle_19oui_60",_n="_stateBadge_19oui_64",mn="_repoLabel_19oui_70",vn="_branchLabel_19oui_75",bn="_costLabel_19oui_80",pn="_errorLabel_19oui_85",yn="_detailPane_19oui_90",$n="_backBtn_19oui_95",A={app:nn,submitForm:sn,repoSelect:rn,promptInput:ln,layout:on,taskList:un,taskListCollapsed:an,placeholder:cn,taskCard:fn,taskCardSelected:dn,taskHeader:hn,taskTitle:gn,stateBadge:_n,repoLabel:mn,branchLabel:vn,costLabel:bn,errorLabel:pn,detailPane:yn,backBtn:$n};var kn=x("<p>No tasks yet."),wn=x("<div><button>&larr; Back"),Sn=x('<div><h1>wmao</h1><p>Work my ass off. Manage coding agents.</p><form><select></select><input type=text placeholder="Describe a task..."><button type=submit></button></form><div><div><h2>Tasks'),xn=x("<option>"),gt=x("<div>"),Tn=x("<span>$<!> &middot; <!>s"),Cn=x("<div><div><strong></strong><span>");function An(){const[t,e]=H(""),[n,s]=H([]),[r,i]=H(!1),[o,l]=H(null),[f,d]=H([]),[_,a]=H("");let N=new Map;Rt(async()=>{ze();const y=await te();d(y),y.length>0&&a(y[0].path)});async function I(){const y=t().trim(),v=_();if(!(!y||!v)){i(!0);try{const S=await ne({prompt:y,repo:v});e(""),await M(),l(S.id)}finally{i(!1)}}}async function M(){const y=await ee();for(const v of y)v.state==="waiting"&&N.get(v.id)!=="waiting"&&en(v.id,v.task);N=new Map(y.map(v=>[v.id,v.state])),s(y)}setInterval(M,5e3),M();const R=()=>[...n()].sort((y,v)=>{const S=y.task.startsWith("(adopted)")?1:0,w=v.task.startsWith("(adopted)")?1:0;return S!==w?S-w:v.id-y.id}),T=()=>{const y=o();return y===null?null:n().find(v=>v.id===y)??null};return(()=>{var y=Sn(),v=y.firstChild,S=v.nextSibling,w=S.nextSibling,b=w.firstChild,B=b.nextSibling,X=B.nextSibling,V=w.nextSibling,D=V.firstChild;return D.firstChild,w.addEventListener("submit",u=>{u.preventDefault(),I()}),b.addEventListener("change",u=>a(u.currentTarget.value)),g(b,$(tt,{get each(){return f()},children:u=>(()=>{var c=xn();return g(c,()=>u.path),k(()=>c.value=u.path),c})()})),B.$$input=u=>e(u.currentTarget.value),g(X,()=>r()?"Submitting...":"Run"),g(D,$(O,{get when(){return n().length===0},get children(){var u=kn();return k(()=>h(u,A.placeholder)),u}}),null),g(D,$(tt,{get each(){return R()},children:u=>(()=>{var c=Cn(),L=c.firstChild,G=L.firstChild,F=G.nextSibling;return c.$$click=()=>l(u.id),g(G,()=>u.task),g(F,()=>u.state),g(c,$(O,{get when(){return u.repo},get children(){var m=gt();return g(m,()=>u.repo),k(()=>h(m,A.repoLabel)),m}}),null),g(c,$(O,{get when(){return u.branch},get children(){var m=gt();return g(m,()=>u.branch),k(()=>h(m,A.branchLabel)),m}}),null),g(c,$(O,{get when(){return u.costUSD>0},get children(){var m=Tn(),q=m.firstChild,U=q.nextSibling,W=U.nextSibling,Y=W.nextSibling;return Y.nextSibling,g(m,()=>u.costUSD.toFixed(4),U),g(m,()=>(u.durationMs/1e3).toFixed(1),Y),k(()=>h(m,A.costLabel)),m}}),null),g(c,$(O,{get when(){return u.error},get children(){var m=gt();return g(m,()=>u.error),k(()=>h(m,A.errorLabel)),m}}),null),k(m=>{var q=`${A.taskCard} ${o()===u.id?A.taskCardSelected:""}`,U=A.taskHeader,W=A.taskTitle,Y=A.stateBadge,bt=En(u.state);return q!==m.e&&h(c,m.e=q),U!==m.t&&h(L,m.t=U),W!==m.a&&h(G,m.a=W),Y!==m.o&&h(F,m.o=Y),bt!==m.i&&Yt(F,"background",m.i=bt),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),c})()}),null),g(V,$(O,{get when(){return o()!==null},get children(){var u=wn(),c=u.firstChild;return c.$$click=()=>l(null),g(u,$(Qe,{get taskId(){return o()??0},get taskState(){var L;return((L=T())==null?void 0:L.state)??"pending"},onClose:()=>l(null)}),null),k(L=>{var G=A.detailPane,F=A.backBtn;return G!==L.e&&h(u,L.e=G),F!==L.t&&h(c,L.t=F),L},{e:void 0,t:void 0}),u}}),null),k(u=>{var c=A.app,L=A.submitForm,G=r(),F=A.repoSelect,m=r(),q=A.promptInput,U=r()||!t().trim()||!_(),W=A.layout,Y=`${A.taskList} ${o()!==null?A.taskListCollapsed:""}`;return c!==u.e&&h(y,u.e=c),L!==u.t&&h(w,u.t=L),G!==u.a&&(b.disabled=u.a=G),F!==u.o&&h(b,u.o=F),m!==u.i&&(B.disabled=u.i=m),q!==u.n&&h(B,u.n=q),U!==u.s&&(X.disabled=u.s=U),W!==u.h&&h(V,u.h=W),Y!==u.r&&h(D,u.r=Y),u},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),k(()=>b.value=_()),k(()=>B.value=t()),y})()}function En(t){switch(t){case"done":return"#d4edda";case"failed":return"#f8d7da";case"ended":return"#e2e3e5";default:return"#fff3cd"}}Nt(["input","click"]);const wt=document.getElementById("app");wt&&Xt(()=>$(An,{}),wt);
