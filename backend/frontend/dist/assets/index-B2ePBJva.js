(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const jt=!1,Nt=(t,e)=>t===e,Mt=Symbol("solid-track"),rt={equals:Nt};let kt=Et;const Y=1,lt=2,St={owned:null,cleanups:null,context:null,owner:null};var E=null;let ft=null,Ot=null,T=null,P=null,J=null,dt=0;function it(t,e){const n=T,s=E,i=t.length===0,r=e===void 0?s:e,o=i?St:{owned:null,cleanups:null,context:r?r.context:null,owner:r},l=i?t:()=>t(()=>K(()=>et(o)));E=o,T=null;try{return st(l,!0)}finally{T=n,E=s}}function W(t,e){e=e?Object.assign({},rt,e):rt;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=i=>(typeof i=="function"&&(i=i(n.value)),At(n,i));return[Ct.bind(n),s]}function $(t,e,n){const s=mt(t,e,!1,Y);nt(s)}function xt(t,e,n){kt=Dt;const s=mt(t,e,!1,Y);s.user=!0,J?J.push(s):nt(s)}function D(t,e,n){n=n?Object.assign({},rt,n):rt;const s=mt(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,nt(s),Ct.bind(s)}function K(t){if(T===null)return t();const e=T;T=null;try{return t()}finally{T=e}}function Ft(t){xt(()=>K(t))}function Tt(t){return E===null||(E.cleanups===null?E.cleanups=[t]:E.cleanups.push(t)),t}function zt(t){const e=D(t),n=D(()=>_t(e()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}function Ct(){if(this.sources&&this.state)if(this.state===Y)nt(this);else{const t=P;P=null,st(()=>at(this),!1),P=t}if(T){const t=this.observers?this.observers.length:0;T.sources?(T.sources.push(this),T.sourceSlots.push(t)):(T.sources=[this],T.sourceSlots=[t]),this.observers?(this.observers.push(T),this.observerSlots.push(T.sources.length-1)):(this.observers=[T],this.observerSlots=[T.sources.length-1])}return this.value}function At(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&st(()=>{for(let i=0;i<t.observers.length;i+=1){const r=t.observers[i],o=ft&&ft.running;o&&ft.disposed.has(r),(o?!r.tState:!r.state)&&(r.pure?P.push(r):J.push(r),r.observers&&Lt(r)),o||(r.state=Y)}if(P.length>1e6)throw P=[],new Error},!1)),e}function nt(t){if(!t.fn)return;et(t);const e=dt;Rt(t,t.value,e)}function Rt(t,e,n){let s;const i=E,r=T;T=E=t;try{s=t.fn(e)}catch(o){return t.pure&&(t.state=Y,t.owned&&t.owned.forEach(et),t.owned=null),t.updatedAt=n+1,It(o)}finally{T=r,E=i}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?At(t,s):t.value=s,t.updatedAt=n)}function mt(t,e,n,s=Y,i){const r={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:E,context:E?E.context:null,pure:n};return E===null||E!==St&&(E.owned?E.owned.push(r):E.owned=[r]),r}function ot(t){if(t.state===0)return;if(t.state===lt)return at(t);if(t.suspense&&K(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<dt);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===Y)nt(t);else if(t.state===lt){const s=P;P=null,st(()=>at(t,e[0]),!1),P=s}}function st(t,e){if(P)return t();let n=!1;e||(P=[]),J?n=!0:J=[],dt++;try{const s=t();return Gt(n),s}catch(s){n||(J=null),P=null,It(s)}}function Gt(t){if(P&&(Et(P),P=null),t)return;const e=J;J=null,e.length&&st(()=>kt(e),!1)}function Et(t){for(let e=0;e<t.length;e++)ot(t[e])}function Dt(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:ot(s)}for(e=0;e<n;e++)ot(t[e])}function at(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const i=s.state;i===Y?s!==e&&(!s.updatedAt||s.updatedAt<dt)&&ot(s):i===lt&&at(s,e)}}}function Lt(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=lt,n.pure?P.push(n):J.push(n),n.observers&&Lt(n))}}function et(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),i=n.observers;if(i&&i.length){const r=i.pop(),o=n.observerSlots.pop();s<i.length&&(r.sourceSlots[o]=s,i[s]=r,n.observerSlots[s]=o)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)et(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)et(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Ut(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function It(t,e=E){throw Ut(t)}function _t(t){if(typeof t=="function"&&!t.length)return _t(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const s=_t(t[n]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}const Vt=Symbol("fallback");function pt(t){for(let e=0;e<t.length;e++)t[e]()}function qt(t,e,n={}){let s=[],i=[],r=[],o=0,l=e.length>1?[]:null;return Tt(()=>pt(r)),()=>{let d=t()||[],f=d.length,g,u;return d[Mt],K(()=>{let I,N,z,x,p,m,S,k,v;if(f===0)o!==0&&(pt(r),r=[],s=[],i=[],o=0,l&&(l=[])),n.fallback&&(s=[Vt],i[0]=it(B=>(r[0]=B,n.fallback())),o=1);else if(o===0){for(i=new Array(f),u=0;u<f;u++)s[u]=d[u],i[u]=it(j);o=f}else{for(z=new Array(f),x=new Array(f),l&&(p=new Array(f)),m=0,S=Math.min(o,f);m<S&&s[m]===d[m];m++);for(S=o-1,k=f-1;S>=m&&k>=m&&s[S]===d[k];S--,k--)z[k]=i[S],x[k]=r[S],l&&(p[k]=l[S]);for(I=new Map,N=new Array(k+1),u=k;u>=m;u--)v=d[u],g=I.get(v),N[u]=g===void 0?-1:g,I.set(v,u);for(g=m;g<=S;g++)v=s[g],u=I.get(v),u!==void 0&&u!==-1?(z[u]=i[g],x[u]=r[g],l&&(p[u]=l[g]),u=N[u],I.set(v,u)):r[g]();for(u=m;u<f;u++)u in z?(i[u]=z[u],r[u]=x[u],l&&(l[u]=p[u],l[u](u))):i[u]=it(j);i=i.slice(0,o=f),s=d.slice(0)}return i});function j(I){if(r[u]=I,l){const[N,z]=W(u);return l[u]=z,e(d[u],N)}return e(d[u])}}}function w(t,e){return K(()=>t(e||{}))}const Bt=t=>`Stale read from <${t}>.`;function ut(t){const e="fallback"in t&&{fallback:()=>t.fallback};return D(qt(()=>t.each,t.children,e||void 0))}function F(t){const e=t.keyed,n=D(()=>t.when,void 0,void 0),s=e?n:D(n,void 0,{equals:(i,r)=>!i==!r});return D(()=>{const i=s();if(i){const r=t.children;return typeof r=="function"&&r.length>0?K(()=>r(e?i:()=>{if(!K(s))throw Bt("Show");return n()})):r}return t.fallback},void 0,void 0)}function Wt(t){const e=zt(()=>t.children),n=D(()=>{const s=e(),i=Array.isArray(s)?s:[s];let r=()=>{};for(let o=0;o<i.length;o++){const l=o,d=i[o],f=r,g=D(()=>f()?void 0:d.when,void 0,void 0),u=d.keyed?g:D(g,void 0,{equals:(j,I)=>!j==!I});r=()=>f()||(u()?[l,g,d]:void 0)}return r});return D(()=>{const s=n()();if(!s)return t.fallback;const[i,r,o]=s,l=o.children;return typeof l=="function"&&l.length>0?K(()=>l(o.keyed?r():()=>{var f;if(((f=K(n)())==null?void 0:f[0])!==i)throw Bt("Match");return r()})):l},void 0,void 0)}function tt(t){return t}const Ht=t=>D(()=>t());function Jt(t,e,n){let s=n.length,i=e.length,r=s,o=0,l=0,d=e[i-1].nextSibling,f=null;for(;o<i||l<r;){if(e[o]===n[l]){o++,l++;continue}for(;e[i-1]===n[r-1];)i--,r--;if(i===o){const g=r<s?l?n[l-1].nextSibling:n[r-l]:d;for(;l<r;)t.insertBefore(n[l++],g)}else if(r===l)for(;o<i;)(!f||!f.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[r-1]&&n[l]===e[i-1]){const g=e[--i].nextSibling;t.insertBefore(n[l++],e[o++].nextSibling),t.insertBefore(n[--r],g),e[i]=n[r]}else{if(!f){f=new Map;let u=l;for(;u<r;)f.set(n[u],u++)}const g=f.get(e[o]);if(g!=null)if(l<g&&g<r){let u=o,j=1,I;for(;++u<i&&u<r&&!((I=f.get(e[u]))==null||I!==g+j);)j++;if(j>g-l){const N=e[o];for(;l<g;)t.insertBefore(n[l++],N)}else t.replaceChild(n[l++],e[o++])}else o++;else e[o++].remove()}}}const yt="_$DX_DELEGATE";function Kt(t,e,n,s={}){let i;return it(r=>{i=r,e===document?t():_(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{i(),e.textContent=""}}function C(t,e,n,s){let i;const r=()=>{const l=document.createElement("template");return l.innerHTML=t,l.content.firstChild},o=()=>(i||(i=r())).cloneNode(!0);return o.cloneNode=o,o}function Pt(t,e=window.document){const n=e[yt]||(e[yt]=new Set);for(let s=0,i=t.length;s<i;s++){const r=t[s];n.has(r)||(n.add(r),e.addEventListener(r,Xt))}}function h(t,e){e==null?t.removeAttribute("class"):t.className=e}function Qt(t,e,n){n!=null?t.style.setProperty(e,n):t.style.removeProperty(e)}function _(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return ct(t,e,s,n);$(i=>ct(t,e(),i,n),s)}function Xt(t){let e=t.target;const n=`$$${t.type}`,s=t.target,i=t.currentTarget,r=d=>Object.defineProperty(t,"target",{configurable:!0,value:d}),o=()=>{const d=e[n];if(d&&!e.disabled){const f=e[`${n}Data`];if(f!==void 0?d.call(e,f,t):d.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&r(e.host),!0},l=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const d=t.composedPath();r(d[0]);for(let f=0;f<d.length-2&&(e=d[f],!!o());f++){if(e._$host){e=e._$host,l();break}if(e.parentNode===i)break}}else l();r(s)}function ct(t,e,n,s,i){for(;typeof n=="function";)n=n();if(e===n)return n;const r=typeof e,o=s!==void 0;if(t=o&&n[0]&&n[0].parentNode||t,r==="string"||r==="number"){if(r==="number"&&(e=e.toString(),e===n))return n;if(o){let l=n[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),n=Z(t,n,s,l)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||r==="boolean")n=Z(t,n,s);else{if(r==="function")return $(()=>{let l=e();for(;typeof l=="function";)l=l();n=ct(t,l,n,s)}),()=>n;if(Array.isArray(e)){const l=[],d=n&&Array.isArray(n);if(bt(l,e,n,i))return $(()=>n=ct(t,l,n,s,!0)),()=>n;if(l.length===0){if(n=Z(t,n,s),o)return n}else d?n.length===0?$t(t,l,s):Jt(t,n,l):(n&&Z(t),$t(t,l));n=l}else if(e.nodeType){if(Array.isArray(n)){if(o)return n=Z(t,n,s,e);Z(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function bt(t,e,n,s){let i=!1;for(let r=0,o=e.length;r<o;r++){let l=e[r],d=n&&n[t.length],f;if(!(l==null||l===!0||l===!1))if((f=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))i=bt(t,l,d)||i;else if(f==="function")if(s){for(;typeof l=="function";)l=l();i=bt(t,Array.isArray(l)?l:[l],Array.isArray(d)?d:[d])||i}else t.push(l),i=!0;else{const g=String(l);d&&d.nodeType===3&&d.data===g?t.push(d):t.push(document.createTextNode(g))}}return i}function $t(t,e,n=null){for(let s=0,i=e.length;s<i;s++)t.insertBefore(e[s],n)}function Z(t,e,n,s){if(n===void 0)return t.textContent="";const i=s||document.createTextNode("");if(e.length){let r=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(i!==l){const d=l.parentNode===t;!r&&!o?d?t.replaceChild(i,l):t.insertBefore(i,n):d&&l.remove()}else r=!0}}else t.insertBefore(i,n);return[i]}class Yt extends Error{constructor(e,n,s){super(n),this.status=e,this.code=n,this.details=s}}async function H(t,e,n){const s={method:t,headers:{"Content-Type":"application/json"}};n!==void 0&&(s.body=JSON.stringify(n));const i=await fetch(e,s);if(!i.ok){const r=await i.json();throw new Yt(i.status,r.error.code,r.details)}return i.json()}function Zt(){return H("GET","/api/v1/repos")}function te(){return H("GET","/api/v1/tasks")}function ee(t){return H("POST","/api/v1/tasks",t)}function ne(t){return new EventSource(`/api/v1/tasks/${t}/events`)}function se(t,e){return H("POST",`/api/v1/tasks/${t}/input`,e)}function ie(t){return H("POST",`/api/v1/tasks/${t}/finish`)}function re(t){return H("POST",`/api/v1/tasks/${t}/end`)}function le(t){return H("POST",`/api/v1/tasks/${t}/pull`)}function oe(t){return H("POST",`/api/v1/tasks/${t}/push`)}function ae(t){return H("POST",`/api/v1/tasks/${t}/reconnect`)}function ue(t){return H("POST",`/api/v1/tasks/${t}/takeover`)}const ce="_container_1d3jz_3",de="_header_1d3jz_9",fe="_closeBtn_1d3jz_20",he="_messageArea_1d3jz_24",ge="_placeholder_1d3jz_35",_e="_inputForm_1d3jz_39",be="_textInput_1d3jz_45",me="_btn_1d3jz_50",ve="_btnGray_1d3jz_58",pe="_btnGreen_1d3jz_62",ye="_btnRed_1d3jz_66",$e="_systemInit_1d3jz_70",we="_systemMsg_1d3jz_76",ke="_assistantMsg_1d3jz_82",Se="_textBlock_1d3jz_86",xe="_result_1d3jz_91",Te="_resultSuccess_1d3jz_98",Ce="_resultError_1d3jz_102",Ae="_resultMeta_1d3jz_106",Ee="_resultText_1d3jz_112",Le="_toolResult_1d3jz_117",Ie="_toolBlock_1d3jz_127",Be="_toolBlockPre_1d3jz_139",y={container:ce,header:de,closeBtn:fe,messageArea:he,placeholder:ge,inputForm:_e,textInput:be,btn:me,btnGray:ve,btnGreen:pe,btnRed:ye,systemInit:$e,systemMsg:we,assistantMsg:ke,textBlock:Se,result:xe,resultSuccess:Te,resultError:Ce,resultMeta:Ae,resultText:Ee,toolResult:Le,toolBlock:Ie,toolBlockPre:Be};var Pe=C("<p>Waiting for agent output..."),je=C("<button type=button>Finish"),Ne=C("<button type=button>Reconnect"),Me=C("<button type=button>Takeover"),Oe=C('<form><input type=text placeholder="Send message to agent..."><button type=submit>Send</button><button type=button>Pull</button><button type=button>Push</button><button type=button>End'),Fe=C("<div><div><h3>Task #</h3><button>Close</button></div><div>"),ze=C("<div>Session started &middot; <!> &middot; "),Re=C("<div>[<!>]"),ht=C("<div>"),Ge=C("<div>$<!> &middot; <!>s &middot; <!> turns"),De=C("<div><strong>"),Ue=C("<details><summary>tool result"),Ve=C("<details><summary></summary><pre>");function qe(t){const[e,n]=W([]),[s,i]=W(""),[r,o]=W(!1);xt(()=>{const x=t.taskId;n([]);const p=ne(x);p.addEventListener("message",m=>{try{const S=JSON.parse(m.data);n(k=>[...k,S])}catch{}}),Tt(()=>p.close())});async function l(){const x=s().trim();if(x){o(!0);try{await se(t.taskId,{prompt:x}),i("")}finally{o(!1)}}}const d=()=>{const x=t.taskState;return x==="running"||x==="starting"||x==="waiting"},f=()=>t.taskState==="waiting";async function g(){await ie(t.taskId)}async function u(){await le(t.taskId)}async function j(){await oe(t.taskId)}async function I(){await re(t.taskId)}async function N(){await ae(t.taskId)}async function z(){await ue(t.taskId)}return(()=>{var x=Fe(),p=x.firstChild,m=p.firstChild;m.firstChild;var S=m.nextSibling,k=p.nextSibling;return _(m,()=>t.taskId,null),S.$$click=()=>t.onClose(),_(k,w(ut,{get each(){return e()},children:v=>w(We,{msg:v})}),null),_(k,w(F,{get when(){return e().length===0},get children(){var v=Pe();return $(()=>h(v,y.placeholder)),v}}),null),_(x,w(F,{get when(){return d()},get children(){var v=Oe(),B=v.firstChild,Q=B.nextSibling,U=Q.nextSibling,R=U.nextSibling,a=R.nextSibling;return v.addEventListener("submit",c=>{c.preventDefault(),l()}),B.$$input=c=>i(c.currentTarget.value),U.$$click=()=>u(),R.$$click=()=>j(),_(v,w(F,{get when(){return f()},get children(){return[(()=>{var c=je();return c.$$click=()=>g(),$(()=>h(c,`${y.btn} ${y.btnGreen}`)),c})(),(()=>{var c=Ne();return c.$$click=()=>N(),$(()=>h(c,`${y.btn} ${y.btnGray}`)),c})(),(()=>{var c=Me();return c.$$click=()=>z(),$(()=>h(c,`${y.btn} ${y.btnGray}`)),c})()]}}),a),a.$$click=()=>I(),$(c=>{var L=y.inputForm,M=r(),O=y.textInput,b=r()||!s().trim(),V=`${y.btn} ${y.btnGray}`,G=`${y.btn} ${y.btnGray}`,q=`${y.btn} ${y.btnRed}`;return L!==c.e&&h(v,c.e=L),M!==c.t&&(B.disabled=c.t=M),O!==c.a&&h(B,c.a=O),b!==c.o&&(Q.disabled=c.o=b),V!==c.i&&h(U,c.i=V),G!==c.n&&h(R,c.n=G),q!==c.s&&h(a,c.s=q),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),$(()=>B.value=s()),v}}),null),$(v=>{var B=y.container,Q=y.header,U=y.closeBtn,R=y.messageArea;return B!==v.e&&h(x,v.e=B),Q!==v.t&&h(p,v.t=Q),U!==v.a&&h(S,v.a=U),R!==v.o&&h(k,v.o=R),v},{e:void 0,t:void 0,a:void 0,o:void 0}),x})()}function We(t){return w(Wt,{get children(){return[w(tt,{get when(){return Ht(()=>t.msg.type==="system")()&&t.msg.subtype==="init"},get children(){var e=ze(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,_(e,()=>t.msg.model,s),_(e,()=>t.msg.claude_code_version,null),$(()=>h(e,y.systemInit)),e}}),w(tt,{get when(){return t.msg.type==="system"},get children(){var e=Re(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,_(e,()=>t.msg.subtype,s),$(()=>h(e,y.systemMsg)),e}}),w(tt,{get when(){return t.msg.type==="assistant"},get children(){var e=ht();return _(e,w(ut,{get each(){var n;return((n=t.msg.message)==null?void 0:n.content)??[]},children:n=>w(F,{get when(){return n.type==="text"},get fallback(){return w(He,{get name(){return n.name??"tool"},get input(){return n.input}})},get children(){var s=ht();return _(s,()=>n.text),$(()=>h(s,y.textBlock)),s}})})),$(()=>h(e,y.assistantMsg)),e}}),w(tt,{get when(){return t.msg.type==="result"},get children(){var e=De(),n=e.firstChild;return _(n,()=>t.msg.is_error?"Error":"Done"),_(e,w(F,{get when(){return t.msg.result},get children(){var s=ht();return _(s,()=>t.msg.result),$(()=>h(s,y.resultText)),s}}),null),_(e,w(F,{get when(){return t.msg.total_cost_usd},get children(){var s=Ge(),i=s.firstChild,r=i.nextSibling,o=r.nextSibling,l=o.nextSibling,d=l.nextSibling,f=d.nextSibling;return f.nextSibling,_(s,()=>{var g;return(g=t.msg.total_cost_usd)==null?void 0:g.toFixed(4)},r),_(s,()=>((t.msg.duration_ms??0)/1e3).toFixed(1),l),_(s,()=>t.msg.num_turns,f),$(()=>h(s,y.resultMeta)),s}}),null),$(()=>h(e,`${y.result} ${t.msg.is_error?y.resultError:y.resultSuccess}`)),e}}),w(tt,{get when(){return t.msg.type==="user"},get children(){var e=Ue();return $(()=>h(e,y.toolResult)),e}})]}})}function He(t){return(()=>{var e=Ve(),n=e.firstChild,s=n.nextSibling;return _(n,()=>t.name),_(s,()=>JSON.stringify(t.input,null,2)),$(i=>{var r=y.toolBlock,o=y.toolBlockPre;return r!==i.e&&h(e,i.e=r),o!==i.t&&h(s,i.t=o),i},{e:void 0,t:void 0}),e})()}Pt(["click","input"]);function Je(){"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()}function Ke(){return"Notification"in window&&Notification.permission==="granted"}function Qe(t,e){if(!Ke()||document.visibilityState==="visible")return;const n=new Notification("Agent waiting for input",{body:`Task #${t}: ${e}`,tag:`wmao-waiting-${t}`});n.onclick=()=>{window.focus(),n.close()}}const Xe="_app_19oui_3",Ye="_submitForm_19oui_10",Ze="_repoSelect_19oui_17",tn="_promptInput_19oui_21",en="_layout_19oui_26",nn="_taskList_19oui_31",sn="_taskListCollapsed_19oui_35",rn="_placeholder_19oui_39",ln="_taskCard_19oui_43",on="_taskCardSelected_19oui_51",an="_taskHeader_19oui_55",un="_taskTitle_19oui_60",cn="_stateBadge_19oui_64",dn="_repoLabel_19oui_70",fn="_branchLabel_19oui_75",hn="_costLabel_19oui_80",gn="_errorLabel_19oui_85",_n="_detailPane_19oui_90",bn="_backBtn_19oui_95",A={app:Xe,submitForm:Ye,repoSelect:Ze,promptInput:tn,layout:en,taskList:nn,taskListCollapsed:sn,placeholder:rn,taskCard:ln,taskCardSelected:on,taskHeader:an,taskTitle:un,stateBadge:cn,repoLabel:dn,branchLabel:fn,costLabel:hn,errorLabel:gn,detailPane:_n,backBtn:bn};var mn=C("<p>No tasks yet."),vn=C("<div><button>&larr; Back"),pn=C('<div><h1>wmao</h1><p>Work my ass off. Manage coding agents.</p><form><select></select><input type=text placeholder="Describe a task..."><button type=submit></button></form><div><div><h2>Tasks'),yn=C("<option>"),gt=C("<div>"),$n=C("<span>$<!> &middot; <!>s"),wn=C("<div><div><strong></strong><span>");function kn(){const[t,e]=W(""),[n,s]=W([]),[i,r]=W(!1),[o,l]=W(null),[d,f]=W([]),[g,u]=W("");let j=new Map;Ft(async()=>{Je();const p=await Zt();f(p),p.length>0&&u(p[0].path)});async function I(){const p=t().trim(),m=g();if(!(!p||!m)){r(!0);try{const S=await ee({prompt:p,repo:m});e(""),await N(),l(S.id)}finally{r(!1)}}}async function N(){const p=await te();for(const m of p)m.state==="waiting"&&j.get(m.id)!=="waiting"&&Qe(m.id,m.task);j=new Map(p.map(m=>[m.id,m.state])),s(p)}setInterval(N,5e3),N();const z=()=>[...n()].sort((p,m)=>{const S=p.task.startsWith("(adopted)")?1:0,k=m.task.startsWith("(adopted)")?1:0;return S!==k?S-k:m.id-p.id}),x=()=>{const p=o();return p===null?null:n().find(m=>m.id===p)??null};return(()=>{var p=pn(),m=p.firstChild,S=m.nextSibling,k=S.nextSibling,v=k.firstChild,B=v.nextSibling,Q=B.nextSibling,U=k.nextSibling,R=U.firstChild;return R.firstChild,k.addEventListener("submit",a=>{a.preventDefault(),I()}),v.addEventListener("change",a=>u(a.currentTarget.value)),_(v,w(ut,{get each(){return d()},children:a=>(()=>{var c=yn();return _(c,()=>a.path),$(()=>c.value=a.path),c})()})),B.$$input=a=>e(a.currentTarget.value),_(Q,()=>i()?"Submitting...":"Run"),_(R,w(F,{get when(){return n().length===0},get children(){var a=mn();return $(()=>h(a,A.placeholder)),a}}),null),_(R,w(ut,{get each(){return z()},children:a=>(()=>{var c=wn(),L=c.firstChild,M=L.firstChild,O=M.nextSibling;return c.$$click=()=>l(a.id),_(M,()=>a.task),_(O,()=>a.state),_(c,w(F,{get when(){return a.repo},get children(){var b=gt();return _(b,()=>a.repo),$(()=>h(b,A.repoLabel)),b}}),null),_(c,w(F,{get when(){return a.branch},get children(){var b=gt();return _(b,()=>a.branch),$(()=>h(b,A.branchLabel)),b}}),null),_(c,w(F,{get when(){return a.costUSD>0},get children(){var b=$n(),V=b.firstChild,G=V.nextSibling,q=G.nextSibling,X=q.nextSibling;return X.nextSibling,_(b,()=>a.costUSD.toFixed(4),G),_(b,()=>(a.durationMs/1e3).toFixed(1),X),$(()=>h(b,A.costLabel)),b}}),null),_(c,w(F,{get when(){return a.error},get children(){var b=gt();return _(b,()=>a.error),$(()=>h(b,A.errorLabel)),b}}),null),$(b=>{var V=`${A.taskCard} ${o()===a.id?A.taskCardSelected:""}`,G=A.taskHeader,q=A.taskTitle,X=A.stateBadge,vt=Sn(a.state);return V!==b.e&&h(c,b.e=V),G!==b.t&&h(L,b.t=G),q!==b.a&&h(M,b.a=q),X!==b.o&&h(O,b.o=X),vt!==b.i&&Qt(O,"background",b.i=vt),b},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),c})()}),null),_(U,w(F,{get when(){return o()!==null},get children(){var a=vn(),c=a.firstChild;return c.$$click=()=>l(null),_(a,w(qe,{get taskId(){return o()??0},get taskState(){var L;return((L=x())==null?void 0:L.state)??"pending"},onClose:()=>l(null)}),null),$(L=>{var M=A.detailPane,O=A.backBtn;return M!==L.e&&h(a,L.e=M),O!==L.t&&h(c,L.t=O),L},{e:void 0,t:void 0}),a}}),null),$(a=>{var c=A.app,L=A.submitForm,M=i(),O=A.repoSelect,b=i(),V=A.promptInput,G=i()||!t().trim()||!g(),q=A.layout,X=`${A.taskList} ${o()!==null?A.taskListCollapsed:""}`;return c!==a.e&&h(p,a.e=c),L!==a.t&&h(k,a.t=L),M!==a.a&&(v.disabled=a.a=M),O!==a.o&&h(v,a.o=O),b!==a.i&&(B.disabled=a.i=b),V!==a.n&&h(B,a.n=V),G!==a.s&&(Q.disabled=a.s=G),q!==a.h&&h(U,a.h=q),X!==a.r&&h(R,a.r=X),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),$(()=>v.value=g()),$(()=>B.value=t()),p})()}function Sn(t){switch(t){case"done":return"#d4edda";case"failed":return"#f8d7da";case"ended":return"#e2e3e5";default:return"#fff3cd"}}Pt(["input","click"]);const wt=document.getElementById("app");wt&&Kt(()=>w(kn,{}),wt);
